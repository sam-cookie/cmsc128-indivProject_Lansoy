{% extends "base.html" %}

{% block title %}Edit Profile{% endblock %}

{% block body %}

<div class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <h3>Menu</h3>
        <button class="sidebar-toggle" id="sidebarToggle">
            <i class="fa-solid fa-chevron-left"></i>
        </button>
    </div>
    <nav class="sidebar-nav">
        <a href="{{ url_for('personal.profile') }}" class="nav-item">
            <i class="fa-solid fa-list"></i>
            <span class="nav-text">My lists</span>
        </a>
        <a href="{{ url_for('collaboration.create_collaboration') }}" class="nav-item">
            <i class="fa-solid fa-plus"></i>
            <span class="nav-text">Create new collaboration</span>
        </a>
        <a href="{{ url_for('collaboration.collaboration') }}" class="nav-item">
            <i class="fa-solid fa-layer-group"></i>
            <span class="nav-text">My Collaborations</span>
        </a>
        <a href="{{ url_for('edit_profile', username=username) }}" class="nav-item">
            <i class="fa-solid fa-user-pen"></i>
            <span class="nav-text">Edit Profile</span>
        </a>
        <a href="{{ url_for('login') }}" class="nav-item">
            <i class="fa-solid fa-right-from-bracket"></i>
            <span class="nav-text">Logout</span>
        </a>
    </nav>
</div>

{% if message %}
<div id="toast" class="toast">Test toast</div>
{% endif %}

<div class="main-content" id="mainContent">
    <div class="edit-profile-container">
        <h2>Edit Profile</h2>

        {% if error %}
        <p style="color: #ff6b6b; margin-bottom: 1rem;">{{ error }}</p>
        {% endif %}

        {% if message %}
        <p style="color: #90ee90; margin-bottom: 1rem;">{{ message }}</p>
        {% endif %}

        <form method="POST">
            <label for="fullName">Full Name: </label>
            <input type="text" id="fullName" name="fullName" value="{{ user.full_name }}"><br>

            <label for="username">New Username:</label>
            <input type="text" id="username" name="username" value="{{ user.username }}"><br>

            <label for="email">New Email:</label>
            <input type="email" id="email" name="email" value="{{ user.email }}"><br>

            <label for="password">New Password:</label>
            <input type="password" id="password" name="password"><br>

            <button class="login-button" type="submit">Update Profile</button>
            <a href="{{ url_for('personal.profile') }}" class="cancel-button">Cancel</a>
        </form>
    </div>
</div>

{% endblock %}
<!-- <script>
window.onload = function () {
    const toast = document.getElementById("toast");

    if (toast) {
        console.log("Toast element found:", toast); // <- check in console
        toast.classList.add("show");

        setTimeout(() => {
            toast.classList.remove("show");
            console.log("Toast hidden"); // <- confirm it disappeared
        }, 3000);
    } else {
        console.warn("Toast element NOT found!"); // <- debug if it doesn't exist
    }
}
</script> -->
